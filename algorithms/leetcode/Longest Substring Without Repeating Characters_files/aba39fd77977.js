!function(e,n){"use strict";function t(e){return e.split("").reduce(function(e,n){return e=(e<<5)-e+n.charCodeAt(0),e&e},0)}function r(){return["$compile",function(n){return{restrict:"E",require:"?^form",link:function(r,i,o,a){var c;!a||e.isUndefined(a.$name)||"hidden"===i.prop("type")||e.isUndefined(o.name)||e.isDefined(o.ngModel)||(c="dmy"+Math.abs(t(a.$name))+"."+o.name.replace(/-/g,"_"),o.$set("ngModel",c),n(i,null,9999)(r))}}}]}var i=e.module("djng.forms",[]),o=["input","select","textarea","datalist"];e.forEach(o,function(e){i.directive(e,r())}),i.directive("djngError",function(){return{restrict:"A",require:"?^form",link:function(n,t,r,i){var o,a=e.isElement(t)?t[0]:null;a&&i&&!e.isUndefined(r.name)&&"bound-field"===r.djngError&&(o=i[r.name],o.$setValidity("bound",!1),o.$parsers.push(function(e){return e!==a.defaultValue&&(o.$setValidity("bound",!0),t.removeAttr("djng-error")),e}))}}}),i.directive("ngModel",["$log",function(n){function t(e){switch(e.type){case"radio":if(e.defaultChecked)return e.defaultValue;break;case"checkbox":if(e.defaultChecked)return!0;break;case"password":return null;default:if(e.defaultValue)return e.defaultValue}}function r(n){var t=[];return e.forEach(n.options,function(r){if(r.defaultSelected){if(e.element(r).prop("selected","selected"),!n.multiple)return void(t=r.value);t.push(r.value)}}),t}function i(e){if(e.defaultValue)return e.defaultValue}function o(n,t){e.isDefined(t)&&(n.$setViewValue(t),e.isObject(n.$options)&&n.$commitViewValue())}return{restrict:"A",priority:1,require:["ngModel","^?form"],link:function(a,c,u,s){var l=e.isElement(c)?c[0]:null,f=s[0],d=s[1]||null,g=a.$eval(u.ngModel);if(l&&d&&!e.isDefined(g)){switch(l.tagName){case"INPUT":o(f,t(l));break;case"SELECT":o(f,r(l));break;case"TEXTAREA":o(f,i(l));break;default:n.log("Unknown field type")}d.$setPristine()}}}}]),i.directive("validateMultipleFields",function(){return{restrict:"A",require:"^?form",link:function(n,t,r,i){function o(t){var r=!1;e.forEach(c,function(e){r=r||e.checked}),i.$setValidity("required",r),t&&(i.$dirty=!0,i.$pristine=!1,n.$apply())}var a,c=[];if(i){try{a=e.fromJson(r.validateMultipleFields)}catch(n){if(!e.isString(r.validateMultipleFields))return;a=[r.validateMultipleFields],i=i[a]}e.forEach(t.find("input"),function(n){a.indexOf(n.name)>=0&&(c.push(n),e.element(n).on("change",o))}),t.on("$destroy",function(){e.forEach(t.find("input"),function(n){e.element(n).off("change")})}),o()}}}}),i.directive("validateDate",function(){function e(e){var n,r;return!e||(r=new Date(e),!isNaN(r)&&(!t||(n=t.exec(e),n&&parseInt(n[2],10)===r.getMonth()+1)))}var t=null;return{require:"?ngModel",restrict:"A",link:function(r,i,o,a){if(a){o.validateDate&&(t=new RegExp(o.validateDate,"i"));var c=function(t){var r=a.$isEmpty(t)||e(t);return a.$setValidity("date",r),r?t:n};a.$parsers.push(c)}}}}),i.directive("validateEmail",function(){return{require:"?ngModel",restrict:"A",link:function(e,n,t,r){if(r&&r.$validators.email&&t.emailPattern){var i=new RegExp(t.emailPattern,"i");r.$validators.email=function(e){return r.$isEmpty(e)||i.test(e)}}}}}),i.factory("djangoForm",function(){function n(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}function t(e){var n=e.$viewChangeListeners.push(e.clearRejected=function(){e.$message="",e.$setValidity("rejected",!0),e.$viewChangeListeners.splice(n-1,1),delete e.clearRejected})}function r(n){return e.isArray(n.$viewChangeListeners)}var i="__all__";return{setErrors:function(o,a){if(o.$message="",o.hasOwnProperty("$error")&&e.isArray(o.$error.rejected)){var c=o.$error.rejected.concat();e.forEach(c,function(n){var t,i=n.$name;o.hasOwnProperty(i)&&(t=o[i],r(t)&&t.clearRejected?t.clearRejected():(t.$message="",e.forEach(t,function(e,n){e&&r(e)&&e.clearRejected&&e.clearRejected()})))})}return e.forEach(a,function(n,a){var c;n.length>0&&(a===i?(o.$message=n[0],o.$setPristine()):o.hasOwnProperty(a)&&(c=o[a],c.$message=n[0],c.$setValidity("rejected",!1),c.$setPristine(),r(c)?t(c):e.forEach(c,function(e,n){e&&r(e)&&t(e)})))}),n(a)}}}),i.directive("djngBindIf",function(){return{restrict:"A",compile:function(e){return e.addClass("ng-binding"),function(e,t,r){t.data("$binding",r.ngBind),e.$watch(r.djngBindIf,function(e){e!==n&&null!==e&&t.text(e)})}}}})}(window.angular),function(e,n){"use strict";var t=e.module("djng.rmi",[]);t.provider("djangoRMI",function(){function t(r){e.forEach(r,function(o,a){if(!e.isObject(o))throw new Error("djangoRMI.configure got invalid data");o.hasOwnProperty("url")?(o.headers["X-Requested-With"]="XMLHttpRequest",r[a]=function(t){var r=e.copy(o);if("POST"===r.method){if(t===n)throw new Error("Calling remote method "+a+" without data object");r.data=t}else"auto"===r.method&&(t===n?r.method="GET":(r.method="POST",r.data=t));return i(r)}):t(o)})}var r,i;this.configure=function(e){r=e,t(r)},this.$get=["$http",function(e){return i=e,r}]})}(window.angular),function(e,n){"use strict";var t=e.module("djng.urls",[]);t.provider("djangoUrl",function(){var e="/angular/reverse/";this.setReverseUrl=function(n){e=n},this.$get=function(){return new r(e)}});var r=function(t){function r(e,n,t){for(var r=i(e),o=0;o<r.length;o++)n.call(t,e[r[o]],r[o]);return r}function i(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n.sort()}function o(t,i){if(!i)return t;var o=[];return r(i,function(t,r){null!==t&&t!==n&&(e.isObject(t)&&(t=e.toJson(t)),("string"==typeof t||t instanceof String)&&0===t.lastIndexOf(":",0)?o.push(encodeURIComponent(r)+"="+t):o.push(encodeURIComponent(r)+"="+encodeURIComponent(t)))}),t+(t.indexOf("?")===-1?"?":"&")+o.join("&")}this.reverse=function(n,i){var a=o(t,{djng_url_name:n});if(Array.isArray(i))return r(i,function(e){a=o(a,{djng_url_args:e})}),a;var c={};return r(i,function(e,n){c["djng_url_kwarg_"+n]=e}),e.equals(c,{})?a:o(a,c)}}}(window.angular),function(e,n){"use strict";function t(){}var r=e.module("djng.websocket",[]);r.service("$websocket",function(){var e;this.connect=function(n){e=new WebSocket(n),e.onopen=this.onopen,e.onmessage=this.onmessage,e.onerror=this.onerror,e.onclose=this.onclose},this.send=function(n){e.send(n)},this.close=function(){e.close()}}),r.provider("djangoWebsocket",function(){var n,r={log:t,warn:t,error:t},i=null,o=e.injector(["ng"]).get("$log");this.setURI=function(e){return n=e,this},this.setHeartbeat=function(e){return i=e,this},this.setLogLevel=function(e){switch(e){case"debug":r=o;break;case"log":r.log=o.log;case"warn":r.warn=o.warn;case"error":r.error=o.error}return this},this.$get=["$websocket","$q","$timeout","$interval",function(t,o,a,c){function u(){r.log("Connecting to "+h),v=o.defer(),t.connect(h)}function s(){try{if(E++,E>3)throw new Error("Too many missed heartbeats.");t.send(i)}catch(e){c.cancel(b),b=null,r.warn("Closing connection. Reason: "+e.message),t.close()}}function l(n,r){j||e.equals(r,n)||t.send(e.toJson(n))}function f(n){e.forEach(n,function(e){"subscribe"===e.substring(0,9)?$=!0:"publish"===e.substring(0,7)&&(w=!0)})}function d(){p.$watchCollection(m,l)}function g(e,t){var r=[n,e,"?"];r.push(t.join("&")),h=r.join("")}var h,v,p,m,$=!1,w=!1,j=!1,y=0,b=null,E=0;return t.onopen=function(e){r.log("Connected"),v.resolve(),y=0,i&&null===b&&(E=0,b=c(s,5e3))},t.onclose=function(e){r.log("Disconnected"),v.reject(),y=Math.min(y+1e3,1e4),a(function(){t.connect(h)},y)},t.onerror=function(e){r.error("Websocket connection is broken!"),t.close()},t.onmessage=function(n){var t;if(n.data===i)return void(E=0);try{t=e.fromJson(n.data)}catch(e){return void r.warn("Data received by server is invalid JSON: "+n.data)}$&&(j=!0,p.$apply(function(){e.extend(p[m],t)}),j=!1)},{connect:function(e,n,t,r){return p=e,f(r),m=n,p[m]=p[m]||{},g(t,r),u(),w&&v.promise.then(d),v.promise}}}]})}(window.angular);

!function(){"use strict";var e=angular.module("articleApp",["djng.urls"]);e.run(function(){}),e.config(["$interpolateProvider","$httpProvider",function(e,t){e.startSymbol("{[{"),e.endSymbol("}]}"),t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.defaults.headers.delete={"Content-Type":"application/json"},t.defaults.xsrfCookieName="csrftoken",t.defaults.xsrfHeaderName="X-CSRFToken"}])}();

!function(){"use strict";var r=angular.module("articleApp");r.controller("articleController",["$scope","$rootScope","subscribeService",function(r,e,s){var i=this;i.errorInfo="",i.error=!1,i.success=!1,i.init=function(r){i.is_subscribed="True"===r},i.subscribe=function(){var r={is_article_subscribed:!i.is_subscribed};s.subscribe(r).then(function(r){i.success=!0,i.error=!1,i.email=r.email,i.is_subscribed=r.is_subscribed},function(r){i.success=!1,i.error=!0,404===r&&(i.errorInfo="Please log in first")})}}]),r.factory("subscribeService",["$http","$q","djangoUrl",function(r,e,s){var i={};return i.subscribe=function(i){var c=e.defer();return r({method:"POST",url:s.reverse("subscriptions"),data:i}).success(function(r){c.resolve(r)}).error(function(r,e){c.reject(e)}),c.promise},i}])}();

jQuery(document).ready(function(t){function e(t){var e="block"===window.getComputedStyle(t).display,a=t.textContent;try{t.classList.add("katex-rendered"),katex.render(a,t,{displayMode:e})}catch(i){t.textContent="\\"+(e?"[":"(")+a+"\\"+(e?"]":")"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,t])}}t(".block-markdown").html(function(t,e){return e=e.replace(/\$\$((.|\s)*?)\$\$/g,"<math>$1</math>")}),t("math").replaceWith(function(){return t(this).html()}),t("script[type='math/tex; mode=display']").replaceWith(function(){var e=t(this).text(),a="\n"==e[0];return a?'<p class="maths">'+e+"</p>":'<span class="maths">'+e+"</span>"}),t(".toc").prepend("<div><h2>Quick Navigation</h2></div>"),Array.prototype.slice.call(document.querySelectorAll(".maths")).forEach(function(t){e(t)}),t(".container img").each(function(){imageSrc=t(this).attr("src"),imageExt=imageSrc.split(".").pop(),"gif"===imageExt&&t(this).attr("data-gifffer",imageSrc)}),Gifffer()});
